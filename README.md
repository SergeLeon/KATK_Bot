# KATK_VKBot

[Бот в ВК](https://vk.com/katk44bot) <br>
[Руководство пользователя](https://vk.com/@katk44bot-rukovodstvo-polzovatelya)

### Информация:

Бот, отправляющий изменения выбранной пользователем группы в учебном
[расписании Костромского автотранспортного колледжа](https://katt44.ru/index.php?option=com_content&view=article&id=252&Itemid=129)
в ВКонтакте.

Возможно использование и в других учебных заведениях. Для этого требуется изменить
***data_parser.py*** сохранив интерфейс взаимодействия.

### Возможности:

- Отправка расписания выбранной пользователем учебной группы.
- Одинаковая работа как в лс, так и в беседе.
- Форматирование расписания по выбранному шаблону (на данный момент 2).
- Работа со многими пользователями.

### Структура проекта:

- ***main.py*** - точка входа в приложение. <br>
  Запускает 3 бесконечных цикла:
    - **event_loop** - реализован в ***main.py***, обрабатывает и отвечает на события происходящие при работе бота.
    - **parsing_loop** - реализован в ***main.py***, проверяет изменения в расписании.
    - **vk_bot_loop** - реализован в ***vk_bot.py***, обрабатывает логику взаимодействия с пользователем в ВК.
- ***vk_bot.py*** - Взаимодействие с пользователем в ВК.
- ***data_parser.py*** - Получение таблиц с расписанием.
- ***table_formatter.py*** - Форматирование таблиц с расписанием.
- ***database.py*** - Работа с базой данных. <br>
  Поля базы данных таблицы **groups**:
    - **peer_id** _INT PRIMARY KEY_ - id беседы или пользователя.
    - **name** _TEXT_ - Установленная группа (берется из расписания).
    - **adv** _INT_ - **1** отправлять обновления / **0** не отправлять.
    - **style_id** _INT_ - id стиля форматирования.
- ***logger.py*** - Логирование приложения.
- ***config.py*** - Конфигурационный файл.

### Что планируется:

- Бот в Телеграмме (*по мере необходимости*)
- Новые стили форматирования:
    - в виде изображения (png)
    - ???
- Вынести логику **event_loop** и **parsing_loop** в отдельные модули.
- Админ панель

